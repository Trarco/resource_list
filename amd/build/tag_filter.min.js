define(["jquery","block_resource_list/filter_manager"],function(t,n){return{init:function(){t(".resource-tag-dropdown").each(function(){const e=t(this),o=e.data("uniqid"),c=t("#resourceListDropdownToggleBtn-"+o),i=t("#resourceListTagfilterinput-"+o),r=c.find(".icon");if(0===c.length||0===i.length)return;c.on("click",function(t){t.stopPropagation(),i.toggle(),r.toggleClass("fa-chevron-down fa-chevron-up")}),i.on("click",function(t){t.stopPropagation()}),t(document).on("click",function(n){t(n.target).closest(e).length||(i.hide(),r.removeClass("fa-chevron-up").addClass("fa-chevron-down"))});const a=function(){const n=i.find("input.tag-filter-checkbox:checked"),e=c.find(".selected-tags-text");if(0===n.length)e.text(c.data("showallresources"));else{const o=n.map(function(){return t(this).val().trim()}).get().join(", ");e.text(o)}};i.on("change","input.tag-filter-checkbox",function(){const e=i.find("input.tag-filter-checkbox:checked").map(function(){return t(this).val()}).get();a(),n.setTags(o,e)}),a()})}}});