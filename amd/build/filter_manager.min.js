define(["jquery"],function(t){function e(e){const i=s[e]||{tags:[],types:[]},a=t('.block[data-blockuniqid="'+e+'"]');let n=!1;a.find("details.course-section, ul.rui-section[data-section]").each(function(){const e=t(this);let s=0;e.find("li.activity-wrapper").each(function(){const e=t(this),a=(e.data("tags")||"").toLowerCase().split(","),n=e.attr("class")||"",o=n.match(/modtype_([a-z0-9_]+)/i),c=o?o[1]:"",g=0===i.tags.length||i.tags.some(t=>a.includes(t)),l=0===i.types.length||i.types.includes(c),u=g&&l;e.toggle(u),u&&s++}),e.toggle(s>0),s>0&&(n=!0)}),a.find('.no-activities-message[data-uniqid="'+e+'"]').toggle(!n)}const s={};return{setTags:function(t,i){s[t]=s[t]||{tags:[],types:[]},s[t].tags=i.map(t=>t.toLowerCase().trim()),e(t)},setTypes:function(t,i){s[t]=s[t]||{tags:[],types:[]},s[t].types=i.map(t=>t.toLowerCase().trim()),e(t)}}});